document.addEventListener("alpine:init",()=>{console.log("Resized Column Alpine Component Initialized"),Alpine.data("resizedColumn",function(u,c){return{tableWrapper:null,table:null,column:null,minColumnWidth:100,maxColumnWidth:1e3,handleBar:null,tableWrapperContentSelector:".fi-ta-content",tableSelector:".fi-ta-table",tableBodyCellPrefix:"fi-table-cell-",debounceTime:500,init(){if(this.column=this.$el,this.table=this.$el.closest(this.tableSelector),this.tableWrapper=this.$el.closest(this.tableWrapperContentSelector),!this.column||!this.table||!this.tableWrapper)return null;this.initializeColumnLayout(),this.onLivewireUpdate()},initializeColumnLayout(){this.column.classList.add("relative","group/column-resize"),this.createHandleBar()},createHandleBar(){this.handleBar=document.createElement("button"),this.handleBar.type="button",this.handleBar.classList.add(..."column-resize-handle-bar absolute top-0 h-2/3 top-1/2 -translate-y-1/2 w-4 cursor-col-resize user-select-none touch-none -right-2 z-10 flex justify-center before:absolute before:inset-y-0 before:w-px before:bg-gray-300 before:dark:bg-white/5 before:translate-x-px hover:before:w-0.5 hover:before:bg-primary-500 before:transition-all before:duration-300".split(" "));let t=this.column.querySelector(".column-resize-handle-bar");t&&t.remove(),this.column.appendChild(this.handleBar),this.handleBar.addEventListener("mousedown",this.startResize(this.column))},startResize(e){return t=>{t.preventDefault();let i="before:!w-1 before:!bg-primary-500";this.handleBar.classList.add(...i.split(" "));let l=t.pageX,n=Math.round(e.offsetWidth),a=Math.round(this.table.offsetWidth),m=Math.round(this.tableWrapper.offsetWidth),o=0,s=d=>{if(d.pageX===l)return;o=Math.round(Math.min(this.maxColumnWidth,Math.max(this.minColumnWidth,n+(d.pageX-l)-16)));let h=a-n+o;this.table.style.width=`${h>m?h:"auto"}px`,this.applyColumnWidth(e,o),this.$dispatch("column-resized")},r=()=>{this.handleBar.classList.remove(...i.split(" ")),this.debounce(()=>{this.$wire.updateColumnWidth(u,o)},this.debounceTime)(),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",r)}},applyColumnWidth(e,t){this.setColumnWidthAttribute(e,t);let i=this.tableBodyCellPrefix+c;this.table.querySelectorAll(`.${this.getEscapedSelectorFromClass(i)}`).forEach(n=>{this.setColumnWidthAttribute(n,t),n.style.overflow="hidden"})},setColumnWidthAttribute(e,t){e.style.maxWidth=`${t}px`,e.style.width=`${t}px`,e.style.minWidth=`${t}px`},getEscapedSelectorFromClass(e){return!e||typeof e!="string"?"":e.replace(/\./g,"\\.")},debounce(e,t){let i;return function(...n){clearTimeout(i),i=setTimeout(()=>{clearTimeout(i),e(...n)},t)}},onLivewireUpdate(){window.Livewire.hook("morph.updated",()=>{this.initializeColumnLayout()})}}})});
